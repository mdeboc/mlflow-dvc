schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: src/prepare.py
      md5: 09f2b6bc6e5541459817834d41baabe3
      size: 986
    params:
      params.yaml:
        prepare.categories:
        - comp.graphics
        - rec.sport.baseball
    outs:
    - path: data/prepared
      md5: 77cdc4b415254bc15c5d109816504915.dir
      size: 3277682
      nfiles: 2
  featurize:
    cmd: python3 src/featurize.py data/prepared data/features
    deps:
    - path: data/prepared
      md5: 77cdc4b415254bc15c5d109816504915.dir
      size: 3277682
      nfiles: 2
    - path: src/featurize.py
      md5: 9ed284bea6b836cd92e87352e0acb6fb
      size: 1674
    outs:
    - path: data/features
      md5: e755e7d5e6de19e585c19bc7ab1c64c4.dir
      size: 418297906
      nfiles: 2
  train:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: data/features
      md5: e755e7d5e6de19e585c19bc7ab1c64c4.dir
      size: 418297906
      nfiles: 2
    - path: src/train.py
      md5: 5e6611d21ecbb4a3ee8552776b376488
      size: 2916
    params:
      params.yaml:
        train.alpha: 15
    outs:
    - path: models/model.pkl
      md5: e82efc782200ca2b9c8b2b061fe4c1e3
      size: 850950
  evaluate:
    cmd: python3 src/evaluate.py model.pkl data/features scores.json plots.json
    deps:
    - path: data/features
      md5: e755e7d5e6de19e585c19bc7ab1c64c4.dir
      size: 418297906
      nfiles: 2
    - path: model.pkl
      md5: b4837a0fe7b23a2e53660c637a8c4574
      size: 850957
    - path: src/evaluate.py
      md5: d663afabb4aeb9d778ce8bece36cacdc
      size: 1360
    outs:
    - path: plots.json
      md5: 9e68566640606aff48965dcb592341d9
      size: 36458
    - path: scores.json
      md5: f191dca3b0ab75f394f07ac8b31f3ccc
      size: 27
  log_production_model:
    cmd: python src/log_production_model.py --config=params.yaml
    deps:
    - path: src/log_production_model.py
      md5: 7c85b21a0310d54933742db6f44b6d76
      size: 1874
    outs:
    - path: prediction_service/model/model.joblib
      md5: 68f14d8669b564cde5cc4228ae4761b9
      size: 851618
